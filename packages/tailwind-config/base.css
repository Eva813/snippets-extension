@tailwind base;
@tailwind components;
@tailwind utilities;

/* T011: CSS 變數定義 - 支援明亮/深色模式 */
@layer base {
  :root {
    /* RetroUI Theme - Light Mode (WCAG AA Compliant) */
    --background: #fbf9f8;
    --foreground: #000000;
    --primary: #3d7a57;           /* 調深 - 白字對比 4.51:1 */
    --primary-hover: #2d5a3f;     /* 調深 - 白字對比 7.89:1 */
    --primary-foreground: #ffffff;
    --accent: #c9a800;            /* 調深 - 黑字對比 6.71:1 */
    --accent-foreground: #000000;
    --border: #000000;
    --ring: #3d7a57;
    --input: #ffffff;
    --muted: #efd0d5;
    --muted-foreground: #6b7280;
    --card: #ffffff;
    --card-foreground: #000000;
    --destructive: #d00000;
    --destructive-foreground: #ffffff;
    --light: #bfd9cb;
    --third: #97b8a6;
    
    /* 陰影標記 */
    --shadow-retro-sm: 2px 2px 0px 0px #000;
    --shadow-retro: 4px 4px 0px 0px #000;
    --shadow-retro-md: 6px 6px 0px 0px #000;
    --shadow-retro-lg: 8px 8px 0px 0px #000;
    --shadow-retro-xl: 12px 12px 0px 0px #000;
    --shadow-input: 3px 4px 0px 1px #000;
    
    /* 邊框標記 */
    --border-width-default: 2px;
    --border-width-bold: 3px;
    --border-width-thin: 1px;
    
    /* 動畫標記 */
    --duration-fast: 100ms;
    --duration-normal: 200ms;
    --duration-slow: 300ms;
    
    /* 圓角 */
    --radius-base: 5px;
  }

  .dark {
    /* ===== 黑暗模式配色系統 (Neutral 灰階) ===== */

    /* 基礎背景色 - 較淺的中性灰 */
    --dark-bg: #404040;              /* 主背景 (neutral-700) */
    --dark-surface: #525252;         /* 卡片/表面 (neutral-600) */
    --dark-surface-hover: #5c5c5c;   /* 表面 hover */
    --dark-elevated: #666666;        /* 提升元素/邊框 */

    /* 文字色 */
    --dark-text-primary: #f5f5f5;    /* 主要文字 (neutral-100) */
    --dark-text-secondary: #a3a3a3;  /* 次要文字 (neutral-400) */

    /* 強調色 */
    --dark-accent: #facc15;          /* 黃色強調 */
    --dark-accent-bg: rgba(250, 204, 21, 0.2); /* 黃色背景 */

    /* ===== 映射到標準變數 ===== */
    --background: var(--dark-bg);
    --foreground: var(--dark-text-primary);
    --primary: var(--dark-accent);
    --primary-hover: #fde047;
    --primary-foreground: #000000;
    --accent: var(--dark-accent);
    --accent-foreground: #000000;
    --border: var(--dark-elevated);
    --ring: var(--dark-accent);
    --input: var(--dark-surface);
    --muted: var(--dark-surface);
    --muted-foreground: var(--dark-text-secondary);
    --card: var(--dark-surface);
    --card-foreground: var(--dark-text-primary);
    --destructive: #f28b82;
    --destructive-foreground: var(--dark-bg);
    --light: var(--dark-elevated);
    --third: var(--dark-surface);

    /* Sidebar 專用 */
    --sidebar-header: #333333;           /* Header 深灰 */
    --sidebar-content: var(--dark-bg);

    /* 選取樣式 */
    --selection-bg: var(--dark-accent);
    --selection-fg: #000000;
  }
  
  * {
    @apply border-border;
  }
  
  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* 黃色選取/反白樣式 (深色模式) */
  .dark ::selection {
    background-color: #facc15;
    color: #000000;
  }

  .dark ::-moz-selection {
    background-color: #facc15;
    color: #000000;
  }
}

/* T010: 自訂實用類別 - 新野獸主義樣式 */
@layer utilities {
  /* 偏移陰影實用類別 */
  .shadow-retro {
    box-shadow: 4px 4px 0px 0px currentColor;
  }
  
  .shadow-retro-lg {
    box-shadow: 8px 8px 0px 0px currentColor;
  }
  
  /* 粗邊框實用類別 */
  .border-neo {
    border-width: 2px;
    border-style: solid;
    border-color: currentColor;
  }
  
  .border-neo-bold {
    border-width: 3px;
    border-style: solid;
    border-color: currentColor;
  }
  
  /* GPU 加速提示 */
  .transform-gpu {
    transform: translateZ(0);
    will-change: transform;
  }
  
  /* 動畫效能優化 */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}
